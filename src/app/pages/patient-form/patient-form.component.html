<app-dashboard-layout [pageTitle]="isEditMode ? 'Editar Paciente' : 'Adicionar Paciente'" [userProfile]="userProfile">
  <div class="form-card">
    <form [formGroup]="patientForm" (ngSubmit)="onSubmit()">
      <div class="form-grid">
        <!-- Nome -->
        <div class="form-group">
          <label for="name">Nome *</label>
          <input id="name" type="text" formControlName="name" class="form-control" [class.is-invalid]="isFieldInvalid('name')">
          <div class="error-message" *ngIf="isFieldInvalid('name')">
            Nome é obrigatório
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email *</label>
          <input id="email" type="email" formControlName="email" class="form-control" [class.is-invalid]="isFieldInvalid('email')">
          <div class="error-message" *ngIf="isFieldInvalid('email')">
            <span *ngIf="patientForm.get('email')?.hasError('required')">Email é obrigatório.</span>
            <span *ngIf="patientForm.get('email')?.hasError('email')">Email inválido.</span>
          </div>
        </div>

        <!-- Telefone -->
        <div class="form-group">
          <label for="phone">Telefone</label>
          <input id="phone" type="tel" formControlName="phone" class="form-control">
        </div>

        <!-- Data de Nascimento -->
        <div class="form-group">
          <label for="birthDate">Data de Nascimento</label>
          <input id="birthDate" type="date" formControlName="birthDate" class="form-control">
        </div>

        <!-- Peso -->
        <div class="form-group">
          <label for="weight">Peso (kg)</label>
          <input id="weight" type="number" formControlName="weight" class="form-control">
        </div>

        <!-- Altura -->
        <div class="form-group">
          <label for="height">Altura (cm)</label>
          <input id="height" type="number" formControlName="height" class="form-control">
        </div>

        <!-- Gênero -->
        <div class="form-group">
          <label for="gender">Gênero</label>
          <select id="gender" formControlName="gender" class="form-control">
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
            <option value="Outro">Outro</option>
          </select>
        </div>

        <!-- Status -->
        <div class="form-group">
          <label for="isActive">Status *</label>
          <select id="isActive" formControlName="isActive" class="form-control" [class.is-invalid]="isFieldInvalid('isActive')">
            <option [value]="true">Ativo</option>
            <option [value]="false">Inativo</option>
          </select>
          <div class="error-message" *ngIf="isFieldInvalid('isActive')">
            Status é obrigatório.
          </div>
        </div>

        <!-- Histórico Médico -->
        <div class="form-group full-width">
          <label for="medicalHistory">Histórico Médico</label>
          <textarea id="medicalHistory" formControlName="medicalHistory" class="form-control"></textarea>
        </div>

        <!-- Alergias -->
        <div class="form-group full-width">
          <label for="allergies">Alergias</label>
          <textarea id="allergies" formControlName="allergies" class="form-control"></textarea>
        </div>

        <!-- Restrições Alimentares -->
        <div class="form-group full-width">
          <label for="dietaryRestrictions">Restrições Alimentares</label>
          <textarea id="dietaryRestrictions" formControlName="dietaryRestrictions" class="form-control"></textarea>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancelar</button>
        <button type="submit" class="btn btn-primary" [disabled]="patientForm.invalid">
          {{ isEditMode ? 'Salvar Alterações' : 'Adicionar Paciente' }}
        </button>
      </div>
    </form>
  </div>
</app-dashboard-layout>
