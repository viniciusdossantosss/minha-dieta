<div class="modal-overlay" [class.active]="isOpen" (click)="closeModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <div class="meal-info">
        <span class="meal-icon">{{ mealData?.icon }}</span>
        <div class="meal-details">
          <h2 class="meal-title">{{ mealData?.name }}</h2>
          <p class="meal-subtitle">Escolha uma opÃ§Ã£o para sua refeiÃ§Ã£o</p>
        </div>
      </div>
      <button class="close-button" (click)="closeModal()">
        <span class="close-icon">Ã—</span>
      </button>
    </div>

    <!-- Modal Content -->
    <div class="modal-content">
      <div class="options-grid">
        <div 
          class="option-card" 
          *ngFor="let option of availableOptions"
          [class.selected]="selectedOption?.id === option.id"
          (click)="selectOption(option)"
        >
          <!-- Option Header -->
          <div class="option-header">
            <h3 class="option-name">{{ option.name }}</h3>
            <div class="option-calories" *ngIf="option.calories">
              <span class="calories-icon">ðŸ”¥</span>
              <span class="calories-text">{{ option.calories }} cal</span>
            </div>
          </div>

          <!-- Option Description -->
          <p class="option-description">{{ option.description }}</p>

          <!-- Ingredients List -->
          <div class="ingredients-section">
            <h4 class="ingredients-title">Ingredientes:</h4>
            <ul class="ingredients-list">
              <li *ngFor="let ingredient of option.ingredients" class="ingredient-item">
                {{ ingredient }}
              </li>
            </ul>
          </div>

          <!-- Selection Indicator -->
          <div class="selection-indicator" *ngIf="selectedOption?.id === option.id">
            <span class="check-icon">âœ“</span>
            <span class="selected-text">Selecionado</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="modal-footer">
      <button class="btn-cancel" (click)="closeModal()">
        Cancelar
      </button>
      <button 
        class="btn-confirm" 
        [disabled]="!selectedOption"
        (click)="confirmSelection()"
      >
        <span *ngIf="!selectedOption">Selecione uma opÃ§Ã£o</span>
        <span *ngIf="selectedOption">Confirmar Escolha</span>
      </button>
    </div>
  </div>
</div>
